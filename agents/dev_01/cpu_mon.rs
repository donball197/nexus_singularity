use std::fs; fn main() { let load = fs::read_to_string("/proc/loadavg").unwrap_or("0.0".to_string()); let cpu = load.split_whitespace().nth(0).unwrap_or("0.0"); let mem = fs::read_to_string("/proc/meminfo").unwrap_or("".to_string()); let mut free_kb = "0"; for line in mem.lines() { if line.starts_with("MemAvailable:") { free_kb = line.split_whitespace().nth(1).unwrap_or("0"); break; } } println!(r#"{{"cpu_load": {}, "mem_available_kb": {}, "status": "online"}}"#, cpu, free_kb); }